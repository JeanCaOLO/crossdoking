import{r as n,s as o,j as e,L as j}from"./index-DIAhV4tm.js";function N(){const[c,g]=n.useState([]),[b,h]=n.useState(!0),[s,u]=n.useState("all");n.useEffect(()=>{d();const t=setInterval(d,15e3);return()=>clearInterval(t)},[s]);const d=async()=>{try{let t=o.from("containers").select("*").order("created_at",{ascending:!1});s!=="all"&&(t=t.eq("status",s));const{data:m,error:a}=await t;if(a)throw a;const l=[];for(const r of m||[])try{const{data:i}=await o.from("container_lines").select("source_import_line_id").eq("container_id",r.id).limit(1).maybeSingle();let x="";if(i?.source_import_line_id){const{data:f}=await o.from("import_lines").select("camion").eq("id",i.source_import_line_id).maybeSingle();x=f?.camion??""}l.push({...r,camion:x})}catch(i){console.error(`Error obteniendo el camión para el contenedor ${r.id}:`,i),l.push({...r,camion:""})}g(l)}catch(t){console.error("Error cargando contenedores:",t)}finally{h(!1)}},p=t=>{const a={OPEN:{bg:"bg-sky-100 text-sky-700",label:"Abierto"},CLOSED:{bg:"bg-amber-100 text-amber-700",label:"Cerrado"},DISPATCHED:{bg:"bg-emerald-100 text-emerald-700",label:"Despachado"}}[t]??{bg:"bg-gray-100 text-gray-700",label:t};return e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${a.bg}`,children:a.label})},y=[{value:"all",label:"Todos"},{value:"OPEN",label:"Abiertos"},{value:"CLOSED",label:"Cerrados"},{value:"DISPATCHED",label:"Despachados"}];return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("div",{className:"flex items-center space-x-2",children:y.map(t=>e.jsx("button",{onClick:()=>u(t.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${s===t.value?"bg-teal-50 text-teal-700":"text-gray-600 hover:bg-gray-50"}`,children:t.label},t.value))})}),b?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-teal-500"})}):c.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-inbox-line text-3xl text-gray-300"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"No hay contenedores disponibles"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:c.map(t=>e.jsx(j,{to:`/contenedores/${t.id}`,className:"block p-5 hover:bg-gray-50/50 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-rose-500 to-rose-600 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-inbox-line text-xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.code}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Tienda:"," ",e.jsx("strong",{children:t.tienda}),t.camion&&e.jsxs(e.Fragment,{children:[" ","·"," ",e.jsxs("span",{className:"inline-flex items-center text-amber-600",children:[e.jsx("i",{className:"ri-truck-line mr-1"}),t.camion]})]})," ","·"," ",new Date(t.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[p(t.status),t.dispatched_at&&e.jsxs("span",{className:"text-[11px] text-gray-400",children:["Despachado:"," ",new Date(t.dispatched_at).toLocaleDateString("es-ES")]}),e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:e.jsx("i",{className:"ri-arrow-right-s-line text-lg text-gray-400"})})]})]})},t.id))})]})})}export{N as default};
//# sourceMappingURL=page-CKYpWuXu.js.map
