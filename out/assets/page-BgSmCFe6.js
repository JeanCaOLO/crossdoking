import{r as a,u as b,a as j,j as e}from"./index-DIAhV4tm.js";function v(){const[t,g]=a.useState(""),[o,h]=a.useState(""),[c,d]=a.useState(""),[m,x]=a.useState(!1),{signIn:p,session:r,user:l,loading:n}=b(),i=j();a.useEffect(()=>{if(n){console.log("â³ [LOGIN] AuthContext aÃºn cargando, esperando...");return}console.log("ðŸ” [LOGIN] Verificando sesiÃ³n existente:",{hasSession:!!r,hasUser:!!l}),r&&l?(console.log("âœ… [LOGIN] SesiÃ³n activa detectada, redirigiendo a /dashboard"),i("/dashboard",{replace:!0})):console.log("â„¹ï¸ [LOGIN] Sin sesiÃ³n, mostrando formulario de login")},[r,l,n,i]);const f=async s=>{s.preventDefault(),d(""),x(!0),console.log("ðŸ” [LOGIN] Intentando login con:",t);try{await p(t,o),console.log("âœ… [LOGIN] Login exitoso, navegando a /dashboard"),i("/dashboard",{replace:!0})}catch(u){console.error("âŒ [LOGIN] Error:",u),d(u.message||"Error al iniciar sesiÃ³n")}finally{x(!1)}};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-5xl text-teal-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verificando sesiÃ³n..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-teal-600 rounded-2xl mb-4",children:e.jsx("i",{className:"ri-truck-line text-3xl text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Crossdocking AlmacÃ©n"}),e.jsx("p",{className:"text-gray-600",children:"Ingresa tus credenciales para continuar"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electrÃ³nico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-gray-400"})}),e.jsx("input",{id:"email",type:"email",value:t,onChange:s=>g(s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"tu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"ContraseÃ±a"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400"})}),e.jsx("input",{id:"password",type:"password",value:o,onChange:s=>h(s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0})]})]}),c&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx("i",{className:"ri-error-warning-line text-red-600 text-xl flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error de autenticaciÃ³n"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Iniciando sesiÃ³n..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-login-box-line"}),"Iniciar sesiÃ³n"]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Â¿Problemas para acceder?"}),e.jsx("p",{className:"mt-1",children:"Contacta al administrador del sistema"})]})]})})}export{v as default};
//# sourceMappingURL=page-BgSmCFe6.js.map
