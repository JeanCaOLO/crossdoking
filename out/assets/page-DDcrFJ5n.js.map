{"version":3,"file":"page-DDcrFJ5n.js","sources":["../../src/pages/login/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth, UserRole } from '../../contexts/AuthContext';\n\nconst roleDefaultRoute: Record<UserRole, string> = {\n  ADMIN: '/dashboard',\n  OPERATOR: '/operacion',\n  VISUALIZADOR: '/dashboard',\n};\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { signIn, session, user, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (authLoading) return;\n    if (session && user) {\n      const route = roleDefaultRoute[user.role] ?? '/dashboard';\n      navigate(route, { replace: true });\n    }\n  }, [session, user, authLoading, navigate]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    try {\n      await signIn(email, password);\n      // La redirección la maneja el useEffect cuando user se cargue\n    } catch (err: any) {\n      setError(err.message || 'Error al iniciar sesión');\n      setLoading(false);\n    }\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line text-5xl text-teal-600 animate-spin\"></i>\n          <p className=\"mt-4 text-gray-600\">Verificando sesión...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-teal-600 rounded-2xl mb-4\">\n            <i className=\"ri-truck-line text-3xl text-white\"></i>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Crossdocking Almacén</h1>\n          <p className=\"text-gray-600\">Ingresa tus credenciales para continuar</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Correo electrónico\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <i className=\"ri-mail-line text-gray-400\"></i>\n              </div>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                placeholder=\"tu@email.com\"\n                required\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Contraseña\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <i className=\"ri-lock-line text-gray-400\"></i>\n              </div>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                placeholder=\"••••••••\"\n                required\n              />\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3\">\n              <i className=\"ri-error-warning-line text-red-600 text-xl flex-shrink-0 mt-0.5\"></i>\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium text-red-800\">Error de autenticación</p>\n                <p className=\"text-sm text-red-600 mt-1\">{error}</p>\n              </div>\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-teal-600 hover:bg-teal-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap cursor-pointer\"\n          >\n            {loading ? (\n              <>\n                <i className=\"ri-loader-4-line animate-spin\"></i>\n                Iniciando sesión...\n              </>\n            ) : (\n              <>\n                <i className=\"ri-login-box-line\"></i>\n                Iniciar sesión\n              </>\n            )}\n          </button>\n        </form>\n\n        <div className=\"mt-6 text-center text-sm text-gray-600\">\n          <p>¿Problemas para acceder?</p>\n          <p className=\"mt-1\">Contacta al administrador del sistema</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["roleDefaultRoute","LoginPage","email","setEmail","useState","password","setPassword","error","setError","loading","setLoading","signIn","session","user","authLoading","useAuth","navigate","useNavigate","useEffect","route","handleSubmit","e","err","jsxs","jsx","Fragment"],"mappings":"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"}