import{r,s as l,j as t,L as j}from"./index-CbDMZEJu.js";function v(){const[o,g]=r.useState([]),[b,p]=r.useState(!0),[s,u]=r.useState("all");r.useEffect(()=>{c();const e=setInterval(c,15e3);return()=>clearInterval(e)},[s]);const c=async()=>{try{let e=l.from("containers").select("*").order("created_at",{ascending:!1});s!=="all"&&(e=e.eq("status",s));const{data:d,error:a}=await e;if(a)throw a;const i=[];for(const n of d||[])try{const{data:m}=await l.from("container_lines").select("source_import_line_id").eq("container_id",n.id).limit(1).maybeSingle();let x="";if(m?.source_import_line_id){const{data:y}=await l.from("import_lines").select("camion").eq("id",m.source_import_line_id).maybeSingle();x=y?.camion??""}i.push({...n,camion:x})}catch{i.push({...n,camion:""})}g(i)}catch(e){console.error("Error cargando contenedores:",e)}finally{p(!1)}},h=e=>{const a={OPEN:{bg:"bg-sky-100 text-sky-700",label:"Abierto"},CLOSED:{bg:"bg-amber-100 text-amber-700",label:"Cerrado"},DISPATCHED:{bg:"bg-emerald-100 text-emerald-700",label:"Despachado"}}[e]??{bg:"bg-gray-100 text-gray-700",label:e};return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${a.bg}`,children:a.label})},f=[{value:"all",label:"Todos"},{value:"OPEN",label:"Abiertos"},{value:"CLOSED",label:"Cerrados"},{value:"DISPATCHED",label:"Despachados"}];return t.jsx("div",{className:"space-y-4 max-w-2xl mx-auto md:max-w-none",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-100",children:[t.jsx("div",{className:"p-3 md:p-4 border-b border-gray-100 overflow-x-auto",children:t.jsx("div",{className:"flex items-center gap-1.5 min-w-max",children:f.map(e=>t.jsx("button",{onClick:()=>u(e.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${s===e.value?"bg-teal-50 text-teal-700":"text-gray-600 hover:bg-gray-50"}`,children:e.label},e.value))})}),b?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-teal-500"})}):o.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx("i",{className:"ri-inbox-line text-3xl text-gray-300"})}),t.jsx("p",{className:"text-sm text-gray-500",children:"No hay contenedores disponibles"})]}):t.jsx("div",{className:"divide-y divide-gray-100",children:o.map(e=>t.jsxs(j,{to:`/contenedores/${e.id}`,className:"flex items-center gap-3 p-4 md:p-5 hover:bg-gray-50/50 active:bg-gray-100 transition-colors cursor-pointer",children:[t.jsx("div",{className:`w-10 h-10 md:w-11 md:h-11 rounded-lg flex items-center justify-center flex-shrink-0 ${e.type==="SOBRANTE"?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-gradient-to-br from-rose-500 to-rose-600"}`,children:t.jsx("i",{className:`${e.type==="SOBRANTE"?"ri-archive-2-line":"ri-inbox-line"} text-lg md:text-xl text-white`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 font-mono",children:e.code}),h(e.status),e.type==="SOBRANTE"&&t.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-700 uppercase tracking-wider",children:"Sobrante"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:e.tienda}),e.camion&&t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-amber-600 font-medium",children:[t.jsx("i",{className:"ri-truck-line"}),e.camion]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(e.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:t.jsx("i",{className:"ri-arrow-right-s-line text-lg text-gray-400"})})]},e.id))})]})})}export{v as default};
//# sourceMappingURL=page-Bu6osrgn.js.map
