{"version":3,"file":"page-BUSWtz83.js","sources":["../../src/pages/dashboard/hooks/useDashboardStats.ts","../../src/pages/dashboard/hooks/useRecentActivity.ts","../../src/pages/dashboard/hooks/useTiendaProgress.ts","../../src/pages/dashboard/components/StatsCards.tsx","../../src/pages/dashboard/components/ProgressOverview.tsx","../../src/pages/dashboard/components/ActivityFeed.tsx","../../src/pages/dashboard/components/TiendaTable.tsx","../../src/pages/dashboard/components/QuickActions.tsx","../../src/pages/dashboard/page.tsx"],"sourcesContent":["import { useEffect, useState, useCallback } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\nexport interface DashboardStats {\n  activeImports: number;\n  doneImports: number;\n  totalLines: number;\n  pendingLines: number;\n  partialLines: number;\n  doneLines: number;\n  openPallets: number;\n  totalPallets: number;\n  openContainers: number;\n  closedContainers: number;\n  dispatchedContainers: number;\n  totalEvents: number;\n  totalCamiones: number;\n  totalSKUs: number;\n  totalTiendas: number;\n  totalUnits: number;\n  totalConfirmed: number;\n  totalPending: number;\n  progressPercent: number;\n}\n\nconst defaultStats: DashboardStats = {\n  activeImports: 0,\n  doneImports: 0,\n  totalLines: 0,\n  pendingLines: 0,\n  partialLines: 0,\n  doneLines: 0,\n  openPallets: 0,\n  totalPallets: 0,\n  openContainers: 0,\n  closedContainers: 0,\n  dispatchedContainers: 0,\n  totalEvents: 0,\n  totalCamiones: 0,\n  totalSKUs: 0,\n  totalTiendas: 0,\n  totalUnits: 0,\n  totalConfirmed: 0,\n  totalPending: 0,\n  progressPercent: 0,\n};\n\nexport function useDashboardStats(refreshInterval = 10000) {\n  const [stats, setStats] = useState<DashboardStats>(defaultStats);\n  const [loading, setLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n\n  const fetchStats = useCallback(async () => {\n    try {\n      const [\n        activeImports,\n        doneImports,\n        totalLines,\n        pendingLines,\n        partialLines,\n        doneLines,\n        openPallets,\n        totalPallets,\n        openContainers,\n        closedContainers,\n        dispatchedContainers,\n        totalEvents,\n        uniqueSKUs,\n        uniqueTiendas,\n        uniqueCamiones,\n        totalUnitsData,\n      ] = await Promise.all([\n        supabase\n          .from('imports')\n          .select('id', { count: 'exact', head: true })\n          .in('status', ['DRAFT', 'IN_PROGRESS']),\n        supabase\n          .from('imports')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'DONE'),\n        supabase\n          .from('import_lines')\n          .select('id', { count: 'exact', head: true }),\n        supabase\n          .from('import_lines')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'PENDING'),\n        supabase\n          .from('import_lines')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'PARTIAL'),\n        supabase\n          .from('import_lines')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'DONE'),\n        supabase\n          .from('pallets')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'OPEN'),\n        supabase.from('pallets').select('id', { count: 'exact', head: true }),\n        supabase\n          .from('containers')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'OPEN'),\n        supabase\n          .from('containers')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'CLOSED'),\n        supabase\n          .from('containers')\n          .select('id', { count: 'exact', head: true })\n          .eq('status', 'DISPATCHED'),\n        supabase\n          .from('scan_events')\n          .select('id', { count: 'exact', head: true }),\n        supabase\n          .from('import_lines')\n          .select('sku'),\n        supabase\n          .from('import_lines')\n          .select('tienda'),\n        supabase\n          .from('import_lines')\n          .select('camion'),\n        supabase\n          .from('import_lines')\n          .select('qty_ordered, qty_confirmed'),\n      ]);\n\n      const tl = totalLines?.count ?? 0;\n      const dl = doneLines?.count ?? 0;\n      const progress = tl > 0 ? Math.round((dl / tl) * 100) : 0;\n\n      // Calcular SKUs únicos\n      const skuSet = new Set(uniqueSKUs?.data?.map(item => item.sku).filter(Boolean) ?? []);\n      \n      // Calcular tiendas únicas\n      const tiendaSet = new Set(uniqueTiendas?.data?.map(item => item.tienda).filter(Boolean) ?? []);\n      \n      // Calcular camiones únicos\n      const camionSet = new Set(uniqueCamiones?.data?.map(item => item.camion).filter(Boolean) ?? []);\n\n      // Calcular totales de unidades\n      const totalUnits = totalUnitsData?.data?.reduce((sum, line) => sum + (line.qty_ordered || 0), 0) ?? 0;\n      const totalConfirmed = totalUnitsData?.data?.reduce((sum, line) => sum + (line.qty_confirmed || 0), 0) ?? 0;\n      const totalPending = totalUnits - totalConfirmed;\n\n      setStats({\n        activeImports: activeImports?.count ?? 0,\n        doneImports: doneImports?.count ?? 0,\n        totalLines: tl,\n        pendingLines: pendingLines?.count ?? 0,\n        partialLines: partialLines?.count ?? 0,\n        doneLines: dl,\n        openPallets: openPallets?.count ?? 0,\n        totalPallets: totalPallets?.count ?? 0,\n        openContainers: openContainers?.count ?? 0,\n        closedContainers: closedContainers?.count ?? 0,\n        dispatchedContainers: dispatchedContainers?.count ?? 0,\n        totalEvents: totalEvents?.count ?? 0,\n        totalCamiones: camionSet.size,\n        totalSKUs: skuSet.size,\n        totalTiendas: tiendaSet.size,\n        totalUnits,\n        totalConfirmed,\n        totalPending,\n        progressPercent: progress,\n      });\n\n      setLastUpdated(new Date());\n    } catch (error) {\n      console.error('Error loading dashboard statistics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchStats();\n    const interval = setInterval(fetchStats, refreshInterval);\n    return () => clearInterval(interval);\n  }, [fetchStats, refreshInterval]);\n\n  return { stats, loading, lastUpdated, refresh: fetchStats };\n}\n","import { useEffect, useState } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\nexport interface RecentActivity {\n  id: string;\n  type: string;\n  description: string;\n  time: string;\n  icon: string;\n  color: string;\n}\n\nexport function useRecentActivity() {\n  const [activities, setActivities] = useState<RecentActivity[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchActivities();\n    const interval = setInterval(fetchActivities, 15000);\n    return () => clearInterval(interval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const fetchActivities = async () => {\n    try {\n      const { data: events, error } = await supabase\n        .from('scan_events')\n        .select('id, event_type, raw_code, sku, tienda, qty, notes, created_at, pallet_id')\n        .order('created_at', { ascending: false })\n        .limit(8);\n\n      if (error) {\n        throw error;\n      }\n\n      if (events && events.length > 0) {\n        // Obtener información de camión para eventos que tienen pallet_id\n        const palletIds = events\n          .filter((e) => e.pallet_id)\n          .map((e) => e.pallet_id as string);\n\n        let camionMap: Record<string, string> = {};\n\n        if (palletIds.length > 0) {\n          // Obtener camiones desde import_lines a través de pallet_code\n          const { data: pallets } = await supabase\n            .from('pallets')\n            .select('id, pallet_code')\n            .in('id', palletIds);\n\n          if (pallets && pallets.length > 0) {\n            const palletCodes = pallets.map((p) => p.pallet_code);\n\n            const { data: importLines } = await supabase\n              .from('import_lines')\n              .select('pallet_code, camion')\n              .in('pallet_code', palletCodes);\n\n            if (importLines) {\n              // Crear mapa de pallet_code -> camion\n              const codeToTruck: Record<string, string> = {};\n              importLines.forEach((line) => {\n                if (line.camion && !codeToTruck[line.pallet_code]) {\n                  codeToTruck[line.pallet_code] = line.camion;\n                }\n              });\n\n              // Crear mapa de pallet_id -> camion\n              pallets.forEach((pallet) => {\n                if (codeToTruck[pallet.pallet_code]) {\n                  camionMap[pallet.id] = codeToTruck[pallet.pallet_code];\n                }\n              });\n            }\n          }\n        }\n\n        const mapped: RecentActivity[] = events.map((e) => {\n          const camion = e.pallet_id ? camionMap[e.pallet_id] || '' : '';\n          const camionText = camion ? ` [${camion}]` : '';\n          \n          const typeMap: Record<\n            string,\n            { desc: string; icon: string; color: string }\n          > = {\n            SCAN_PALLET: {\n              desc: `Pallet escaneado: ${e.raw_code || 'N/A'}`,\n              icon: 'ri-qr-scan-2-line',\n              color: 'bg-teal-100 text-teal-700',\n            },\n            SCAN_SKU: {\n              desc: `SKU escaneado: ${e.sku || e.raw_code || 'N/A'} → ${\n                e.tienda || ''\n              }${camionText}`,\n              icon: 'ri-barcode-line',\n              color: 'bg-sky-100 text-sky-700',\n            },\n            CONFIRM_QTY: {\n              desc: `Confirmado: ${e.qty} uds de ${\n                e.sku || 'N/A'\n              } → ${e.tienda || ''}${camionText}`,\n              icon: 'ri-check-double-line',\n              color: 'bg-emerald-100 text-emerald-700',\n            },\n            CLOSE: {\n              desc:\n                e.notes ||\n                `Distribución cerrada para ${e.tienda || 'N/A'}${camionText}`,\n              icon: 'ri-inbox-archive-line',\n              color: 'bg-amber-100 text-amber-700',\n            },\n            UNLOCK: {\n              desc: 'Pallet liberado',\n              icon: 'ri-lock-unlock-line',\n              color: 'bg-gray-100 text-gray-700',\n            },\n            ADJUST: {\n              desc: `Ajuste: ${e.notes || 'N/A'}`,\n              icon: 'ri-edit-line',\n              color: 'bg-rose-100 text-rose-700',\n            },\n            REVERSE: {\n              desc: `Reversión: ${e.qty} uds de ${e.sku || 'N/A'} → ${e.tienda || ''}${camionText}`,\n              icon: 'ri-arrow-go-back-line',\n              color: 'bg-rose-100 text-rose-700',\n            },\n          };\n\n          const info =\n            typeMap[e.event_type] || {\n              desc: e.event_type,\n              icon: 'ri-information-line',\n              color: 'bg-gray-100 text-gray-700',\n            };\n\n          const timeAgo = getTimeAgo(new Date(e.created_at));\n\n          return {\n            id: e.id,\n            type: e.event_type,\n            description: info.desc,\n            time: timeAgo,\n            icon: info.icon,\n            color: info.color,\n          };\n        });\n\n        setActivities(mapped);\n      } else {\n        setActivities([]);\n      }\n    } catch (error) {\n      console.error('Error cargando actividad:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { activities, loading };\n}\n\nfunction getTimeAgo(date: Date): string {\n  const now = new Date();\n  const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n  if (diffInSeconds < 60) return 'Hace un momento';\n  if (diffInSeconds < 3600)\n    return `Hace ${Math.floor(diffInSeconds / 60)} min`;\n  if (diffInSeconds < 86400)\n    return `Hace ${Math.floor(diffInSeconds / 3600)} h`;\n  return `Hace ${Math.floor(diffInSeconds / 86400)} d`;\n}\n","import { useEffect, useState } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\nexport interface TiendaProgress {\n  tienda: string;\n  camion: string;\n  total: number;\n  confirmed: number;\n  pending: number;\n  percent: number;\n}\n\nexport function useTiendaProgress() {\n  const [data, setData] = useState<TiendaProgress[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchProgress();\n    const interval = setInterval(fetchProgress, 15000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const fetchProgress = async () => {\n    try {\n      // Obtener la importación más reciente (cualquier estado excepto CANCELLED)\n      const { data: recentImport } = await supabase\n        .from('imports')\n        .select('id, status')\n        .neq('status', 'CANCELLED')\n        .order('created_at', { ascending: false })\n        .limit(1)\n        .maybeSingle();\n\n      if (!recentImport) {\n        setData([]);\n        setLoading(false);\n        return;\n      }\n\n      // Obtener líneas agrupadas por tienda\n      const { data: lines } = await supabase\n        .from('import_lines')\n        .select('tienda, camion, qty_to_send, qty_confirmed')\n        .eq('import_id', recentImport.id)\n        .not('tienda', 'is', null);\n\n      if (!lines || lines.length === 0) {\n        setData([]);\n        setLoading(false);\n        return;\n      }\n\n      // Agrupar por tienda\n      const grouped = lines.reduce((acc, line) => {\n        const key = line.tienda;\n        if (!acc[key]) {\n          acc[key] = {\n            tienda: line.tienda,\n            camion: line.camion || 'Sin asignar',\n            total: 0,\n            confirmed: 0,\n          };\n        }\n        acc[key].total += line.qty_to_send || 0;\n        acc[key].confirmed += line.qty_confirmed || 0;\n        return acc;\n      }, {} as Record<string, { tienda: string; camion: string; total: number; confirmed: number }>);\n\n      // Convertir a array y calcular porcentajes\n      const result: TiendaProgress[] = Object.values(grouped)\n        .map((g) => ({\n          tienda: g.tienda,\n          camion: g.camion,\n          total: g.total,\n          confirmed: g.confirmed,\n          pending: g.total - g.confirmed,\n          percent: g.total > 0 ? Math.round((g.confirmed / g.total) * 100) : 0,\n        }))\n        .sort((a, b) => b.percent - a.percent);\n\n      setData(result);\n    } catch (error) {\n      console.error('Error cargando progreso por tienda:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { data, loading };\n}\n","import { DashboardStats } from '../hooks/useDashboardStats';\n\ninterface Props {\n  stats: DashboardStats;\n  loading: boolean;\n}\n\nexport default function StatsCards({ stats, loading }: Props) {\n  const cards = [\n    {\n      title: 'Total Pallets',\n      value: stats.totalPallets || 0,\n      icon: 'ri-stack-line',\n      color: 'bg-teal-100 text-teal-700',\n    },\n    {\n      title: 'SKUs Únicos',\n      value: stats.totalSKUs || 0,\n      icon: 'ri-barcode-line',\n      color: 'bg-sky-100 text-sky-700',\n    },\n    {\n      title: 'Tiendas',\n      value: stats.totalTiendas || 0,\n      icon: 'ri-store-2-line',\n      color: 'bg-purple-100 text-purple-700',\n    },\n    {\n      title: 'Camiones',\n      value: stats.totalCamiones || 0,\n      icon: 'ri-truck-line',\n      color: 'bg-amber-100 text-amber-700',\n    },\n    {\n      title: 'Unidades Totales',\n      value: (stats.totalUnits || 0).toLocaleString(),\n      icon: 'ri-inbox-line',\n      color: 'bg-emerald-100 text-emerald-700',\n    },\n    {\n      title: 'Confirmadas',\n      value: (stats.totalConfirmed || 0).toLocaleString(),\n      icon: 'ri-check-double-line',\n      color: 'bg-green-100 text-green-700',\n    },\n    {\n      title: 'Pendientes',\n      value: (stats.totalPending || 0).toLocaleString(),\n      icon: 'ri-time-line',\n      color: 'bg-rose-100 text-rose-700',\n    },\n    {\n      title: 'Progreso',\n      value: `${stats.progressPercent || 0}%`,\n      icon: 'ri-pie-chart-line',\n      color: 'bg-indigo-100 text-indigo-700',\n    },\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5\">\n        {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (\n          <div key={i} className=\"bg-white rounded-xl p-5 animate-pulse\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"h-10 w-10 bg-gray-200 rounded-lg\"></div>\n              <div className=\"flex-1\">\n                <div className=\"h-3 w-20 bg-gray-200 rounded mb-2\"></div>\n                <div className=\"h-6 w-16 bg-gray-200 rounded\"></div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5\">\n      {cards.map((card, index) => (\n        <div\n          key={index}\n          className=\"bg-white rounded-xl p-5 border border-gray-100 hover:shadow-md transition-shadow\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className={`w-10 h-10 ${card.color} rounded-lg flex items-center justify-center`}>\n              <i className={`${card.icon} text-xl`}></i>\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-xs font-medium text-gray-500 mb-1\">{card.title}</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{card.value}</p>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","\nimport { DashboardStats } from '../hooks/useDashboardStats';\n\ninterface Props {\n  stats: DashboardStats;\n}\n\n/**\n * ProgressOverview component displays a visual summary of import progress.\n * It safely handles missing or zero values and guarantees that the UI\n * never breaks due to division by zero or undefined data.\n */\nexport default function ProgressOverview({ stats }: Props) {\n  // Guard against an unexpected undefined `stats` object.\n  // This should never happen in normal usage, but it makes the component\n  // more robust if the parent forgets to pass the required prop.\n  if (!stats) {\n    console.error('ProgressOverview: `stats` prop is missing.');\n    return null;\n  }\n\n  const segments = [\n    { label: 'Completadas', value: stats.doneLines ?? 0, color: 'bg-emerald-500' },\n    { label: 'Parciales', value: stats.partialLines ?? 0, color: 'bg-amber-400' },\n    { label: 'Pendientes', value: stats.pendingLines ?? 0, color: 'bg-gray-200' },\n  ];\n\n  // Avoid division by zero – fallback to 1 when totalLines is falsy.\n  const total = stats.totalLines > 0 ? stats.totalLines : 1;\n\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-sm font-semibold text-gray-900\">Progreso General</h3>\n        <span className=\"text-2xl font-bold text-teal-600\">{stats.progressPercent ?? 0}%</span>\n      </div>\n\n      {/* Progress bar */}\n      <div className=\"w-full h-3 bg-gray-100 rounded-full overflow-hidden flex mb-4\">\n        {segments.map((seg) => {\n          const width = (seg.value / total) * 100;\n          return width > 0 ? (\n            <div\n              key={seg.label}\n              className={`${seg.color} h-full transition-all duration-500`}\n              style={{ width: `${width}%` }}\n            />\n          ) : null;\n        })}\n      </div>\n\n      {/* Legend */}\n      <div className=\"grid grid-cols-3 gap-3\">\n        {segments.map((seg) => (\n          <div key={seg.label} className=\"text-center\">\n            <div className=\"flex items-center justify-center space-x-1.5 mb-1\">\n              <div className={`w-2.5 h-2.5 rounded-full ${seg.color}`} />\n              <span className=\"text-xs text-gray-500\">{seg.label}</span>\n            </div>\n            <p className=\"text-lg font-bold text-gray-900\">{seg.value}</p>\n          </div>\n        ))}\n      </div>\n\n      {/* Footer details */}\n      <div className=\"mt-4 pt-4 border-t border-gray-100\">\n        <div className=\"flex items-center justify-between text-xs text-gray-500\">\n          <span>Total de líneas</span>\n          <span className=\"font-semibold text-gray-900\">{stats.totalLines ?? 0}</span>\n        </div>\n        <div className=\"flex items-center justify-between text-xs text-gray-500 mt-1\">\n          <span>Cargas completadas</span>\n          <span className=\"font-semibold text-gray-900\">{stats.doneImports ?? 0}</span>\n        </div>\n        <div className=\"flex items-center justify-between text-xs text-gray-500 mt-1\">\n          <span>Eventos de escaneo</span>\n          <span className=\"font-semibold text-gray-900\">{stats.totalEvents ?? 0}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\nimport React from 'react';\nimport { RecentActivity } from '../hooks/useRecentActivity';\n\ninterface Props {\n  activities: RecentActivity[];\n  loading: boolean;\n}\n\n/**\n * ActivityFeed component displays a list of recent activities.\n * It handles loading state, empty state, and unexpected data gracefully.\n */\nexport default function ActivityFeed({ activities = [], loading }: Props) {\n  // Guard against unexpected null/undefined values\n  const safeActivities = Array.isArray(activities) ? activities : [];\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n        <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">\n          Actividad Reciente\n        </h3>\n        <div className=\"space-y-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <div key={i} className=\"flex items-start space-x-3 animate-pulse\">\n              <div className=\"w-8 h-8 bg-gray-200 rounded-lg\"></div>\n              <div className=\"flex-1\">\n                <div className=\"h-3 w-3/4 bg-gray-200 rounded mb-1\"></div>\n                <div className=\"h-2 w-16 bg-gray-200 rounded\"></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-sm font-semibold text-gray-900\">\n          Actividad Reciente\n        </h3>\n        <div className=\"flex items-center space-x-1.5\">\n          <div className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"></div>\n          <span className=\"text-[11px] text-gray-400\">En vivo</span>\n        </div>\n      </div>\n\n      {safeActivities.length === 0 ? (\n        <div className=\"text-center py-8\">\n          <i className=\"ri-time-line text-3xl text-gray-300 mb-2\"></i>\n          <p className=\"text-sm text-gray-400\">Sin actividad reciente</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {safeActivities.map((activity) => (\n            <div key={activity.id} className=\"flex items-start space-x-3\">\n              <div\n                className={`w-8 h-8 min-w-[32px] rounded-lg flex items-center justify-center ${activity.color}`}\n              >\n                <i className={`${activity.icon} text-sm`}></i>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm text-gray-700 leading-snug truncate\">\n                  {activity.description}\n                </p>\n                <p className=\"text-[11px] text-gray-400 mt-0.5\">\n                  {activity.time}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { TiendaProgress } from '../hooks/useTiendaProgress';\n\ninterface Props {\n  data: TiendaProgress[];\n  loading: boolean;\n}\n\nexport default function TiendaTable({ data, loading }: Props) {\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n        <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">Progreso por Tienda</h3>\n        <div className=\"space-y-3 animate-pulse\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"h-10 bg-gray-100 rounded-lg\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n      <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">Progreso por Tienda</h3>\n\n      {data.length === 0 ? (\n        <div className=\"text-center py-8\">\n          <i className=\"ri-store-2-line text-3xl text-gray-300 mb-2\"></i>\n          <p className=\"text-sm text-gray-400\">Sin datos de tiendas</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {data.map((t) => (\n            <div key={t.tienda} className=\"group\">\n              <div className=\"flex items-center justify-between mb-1.5\">\n                <div className=\"flex items-center space-x-2 truncate max-w-[60%]\">\n                  <span className=\"text-sm font-medium text-gray-700 truncate\">{t.tienda}</span>\n                  <span className=\"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full whitespace-nowrap\">\n                    <i className=\"ri-truck-line mr-1\"></i>\n                    {t.camion}\n                  </span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-xs text-gray-400\">\n                    {t.confirmed}/{t.total}\n                  </span>\n                  <span\n                    className={`text-xs font-bold ${\n                      t.percent === 100\n                        ? 'text-emerald-600'\n                        : t.percent > 50\n                        ? 'text-amber-600'\n                        : 'text-gray-500'\n                    }`}\n                  >\n                    {t.percent}%\n                  </span>\n                </div>\n              </div>\n              <div className=\"w-full h-2 bg-gray-100 rounded-full overflow-hidden\">\n                <div\n                  className={`h-full rounded-full transition-all duration-500 ${\n                    t.percent === 100\n                      ? 'bg-emerald-500'\n                      : t.percent > 50\n                      ? 'bg-amber-400'\n                      : 'bg-teal-400'\n                  }`}\n                  style={{ width: `${t.percent}%` }}\n                ></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","\nimport { Link } from 'react-router-dom';\n\nconst actions = [\n  {\n    title: 'Importar Excel',\n    desc: 'Cargar nuevo archivo de pedidos',\n    icon: 'ri-file-excel-2-line',\n    link: '/cargas/nueva',\n    gradient: 'from-emerald-500 to-emerald-600',\n  },\n  {\n    title: 'Escanear Pallet',\n    desc: 'Iniciar distribución de mercadería',\n    icon: 'ri-qr-scan-2-line',\n    link: '/operacion',\n    gradient: 'from-teal-500 to-cyan-600',\n  },\n  {\n    title: 'Ver Cargas',\n    desc: 'Consultar importaciones activas',\n    icon: 'ri-file-list-3-line',\n    link: '/cargas',\n    gradient: 'from-amber-500 to-orange-500',\n  },\n  {\n    title: 'Contenedores',\n    desc: 'Gestionar despachos',\n    icon: 'ri-inbox-line',\n    link: '/contenedores',\n    gradient: 'from-rose-500 to-rose-600',\n  },\n];\n\nexport default function QuickActions() {\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100\">\n      <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">\n        Acciones Rápidas\n      </h3>\n      <div className=\"grid grid-cols-2 gap-3\">\n        {actions.map((action) => (\n          <Link\n            key={action.title}\n            to={action.link}\n            className=\"border border-gray-100 rounded-lg p-3 hover:border-teal-300 hover:shadow-sm transition-all cursor-pointer group\"\n          >\n            <div\n              className={`w-9 h-9 bg-gradient-to-br ${action.gradient} rounded-lg flex items-center justify-center mb-2`}\n            >\n              <i className={`${action.icon} text-lg text-white`}></i>\n            </div>\n            <p className=\"text-sm font-medium text-gray-800 group-hover:text-teal-700 transition-colors leading-tight\">\n              {action.title}\n            </p>\n            <p className=\"text-[11px] text-gray-400 mt-0.5 leading-tight\">\n              {action.desc}\n            </p>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n","\nimport { useDashboardStats } from './hooks/useDashboardStats';\nimport { useRecentActivity } from './hooks/useRecentActivity';\nimport { useTiendaProgress } from './hooks/useTiendaProgress';\nimport StatsCards from './components/StatsCards';\nimport ProgressOverview from './components/ProgressOverview';\nimport ActivityFeed from './components/ActivityFeed';\nimport TiendaTable from './components/TiendaTable';\nimport QuickActions from './components/QuickActions';\n\nexport default function DashboardPage() {\n  const { stats, loading, lastUpdated, refresh } = useDashboardStats(10000);\n  const { activities, loading: actLoading } = useRecentActivity();\n  const { data: tiendaData, loading: tiendaLoading } = useTiendaProgress();\n\n  // Guard against unexpected null/undefined values\n  const safeLastUpdated = lastUpdated instanceof Date ? lastUpdated : new Date();\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-sm text-gray-500\">\n            Última actualización:{' '}\n            {safeLastUpdated.toLocaleTimeString('es-ES', {\n              hour: '2-digit',\n              minute: '2-digit',\n              second: '2-digit',\n            })}\n          </p>\n        </div>\n        <button\n          onClick={refresh}\n          className=\"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-teal-700 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-refresh-line\"></i>\n          <span>Actualizar</span>\n        </button>\n      </div>\n\n      <StatsCards stats={stats} loading={loading} />\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2 space-y-6\">\n          <ProgressOverview stats={stats} />\n          <TiendaTable data={tiendaData} loading={tiendaLoading} />\n        </div>\n        <div className=\"space-y-6\">\n          <QuickActions />\n          <ActivityFeed activities={activities} loading={actLoading} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["defaultStats","useDashboardStats","refreshInterval","stats","setStats","useState","loading","setLoading","lastUpdated","setLastUpdated","fetchStats","useCallback","activeImports","doneImports","totalLines","pendingLines","partialLines","doneLines","openPallets","totalPallets","openContainers","closedContainers","dispatchedContainers","totalEvents","uniqueSKUs","uniqueTiendas","uniqueCamiones","totalUnitsData","supabase","tl","dl","progress","skuSet","item","tiendaSet","camionSet","totalUnits","sum","line","totalConfirmed","totalPending","error","useEffect","interval","useRecentActivity","activities","setActivities","fetchActivities","events","palletIds","e","camionMap","pallets","palletCodes","p","importLines","codeToTruck","pallet","mapped","camion","camionText","info","timeAgo","getTimeAgo","date","diffInSeconds","useTiendaProgress","data","setData","fetchProgress","recentImport","lines","grouped","acc","key","result","g","a","b","StatsCards","cards","jsx","i","jsxs","card","index","ProgressOverview","segments","total","seg","width","ActivityFeed","safeActivities","activity","TiendaTable","t","actions","QuickActions","action","Link","DashboardPage","refresh","actLoading","tiendaData","tiendaLoading","safeLastUpdated"],"mappings":"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"}