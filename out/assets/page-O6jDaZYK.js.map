{"version":3,"file":"page-O6jDaZYK.js","sources":["../../src/pages/operacion/reportes/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase, Import, ImportLine, PalletInventory } from '../../../lib/supabase';\nimport { useToast } from '../../../components/base/Toast';\n\ninterface FaltanteRow {\n  import_id: string;\n  import_name: string;\n  sku: string;\n  descripcion: string;\n  tienda: string;\n  qty_to_send: number;\n  qty_confirmed: number;\n  faltante: number;\n  pallet_code: string;\n}\n\ninterface SobranteRow {\n  pallet_id: string;\n  pallet_code: string;\n  sku: string;\n  qty_available: number;\n  tiene_demanda: boolean;\n  import_id?: string;\n  import_name?: string;\n}\n\nexport default function ReportesPage() {\n  const { showToast } = useToast();\n  const [imports, setImports] = useState<Import[]>([]);\n  const [selectedImportId, setSelectedImportId] = useState<string>('all');\n  const [faltantes, setFaltantes] = useState<FaltanteRow[]>([]);\n  const [sobrantes, setSobrantes] = useState<SobranteRow[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'faltantes' | 'sobrantes'>('faltantes');\n\n  useEffect(() => {\n    loadImports();\n  }, []);\n\n  useEffect(() => {\n    if (selectedImportId) {\n      loadReportes();\n    }\n  }, [selectedImportId]);\n\n  const loadImports = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('imports')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setImports(data || []);\n\n      if (data && data.length > 0) {\n        setSelectedImportId('all');\n      }\n    } catch (error) {\n      console.error('Error cargando imports:', error);\n      showToast('error', 'Error', 'No se pudieron cargar las importaciones');\n    }\n  };\n\n  const loadReportes = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadFaltantes(), loadSobrantes()]);\n    } catch (error) {\n      console.error('Error cargando reportes:', error);\n      showToast('error', 'Error', 'No se pudieron cargar los reportes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadFaltantes = async () => {\n    try {\n      let query = supabase\n        .from('import_lines')\n        .select('*, imports!inner(id, file_name)')\n        .lt('qty_confirmed', supabase.raw('qty_to_send'));\n\n      if (selectedImportId !== 'all') {\n        query = query.eq('import_id', selectedImportId);\n      }\n\n      const { data, error } = await query.order('tienda', { ascending: true });\n\n      if (error) throw error;\n\n      const faltantesData: FaltanteRow[] = (data || []).map((line: any) => ({\n        import_id: line.import_id,\n        import_name: line.imports.file_name,\n        sku: line.sku,\n        descripcion: line.descripcion,\n        tienda: line.tienda,\n        qty_to_send: line.qty_to_send,\n        qty_confirmed: line.qty_confirmed,\n        faltante: line.qty_to_send - line.qty_confirmed,\n        pallet_code: line.pallet_code,\n      }));\n\n      setFaltantes(faltantesData);\n    } catch (error) {\n      console.error('Error cargando faltantes:', error);\n      throw error;\n    }\n  };\n\n  const loadSobrantes = async () => {\n    try {\n      let query = supabase\n        .from('pallet_inventory')\n        .select('*, pallets!inner(id, pallet_code, import_id), imports:pallets(imports(id, file_name))')\n        .gt('qty_available', 0);\n\n      const { data, error } = await query.order('pallet_code', { ascending: true });\n\n      if (error) throw error;\n\n      const sobrantesData: SobranteRow[] = [];\n\n      for (const inv of data || []) {\n        const pallet = inv.pallets as any;\n        const importId = pallet.import_id;\n\n        let tieneDemanda = false;\n        if (importId) {\n          const { data: demandaData } = await supabase\n            .from('import_lines')\n            .select('id')\n            .eq('import_id', importId)\n            .eq('sku', inv.sku)\n            .lt('qty_confirmed', supabase.raw('qty_to_send'))\n            .limit(1)\n            .maybeSingle();\n\n          tieneDemanda = !!demandaData;\n        }\n\n        if (selectedImportId === 'all' || importId === selectedImportId) {\n          const importInfo = pallet.imports?.[0] || {};\n          sobrantesData.push({\n            pallet_id: inv.pallet_id,\n            pallet_code: pallet.pallet_code,\n            sku: inv.sku,\n            qty_available: inv.qty_available,\n            tiene_demanda: tieneDemanda,\n            import_id: importId,\n            import_name: importInfo.file_name,\n          });\n        }\n      }\n\n      setSobrantes(sobrantesData);\n    } catch (error) {\n      console.error('Error cargando sobrantes:', error);\n      throw error;\n    }\n  };\n\n  const exportToCSV = (type: 'faltantes' | 'sobrantes') => {\n    try {\n      let csvContent = '';\n      let filename = '';\n\n      if (type === 'faltantes') {\n        csvContent = 'Import,SKU,Descripción,Tienda,Requerido,Confirmado,Faltante,Pallet\\n';\n        faltantes.forEach((row) => {\n          // Escape double quotes in fields to keep CSV valid\n          const importName = row.import_name.replace(/\"/g, '\"\"');\n          const descripcion = row.descripcion.replace(/\"/g, '\"\"');\n          const palletCode = row.pallet_code.replace(/\"/g, '\"\"');\n\n          csvContent += `\"${importName}\",\"${row.sku}\",\"${descripcion}\",\"${row.tienda}\",${row.qty_to_send},${row.qty_confirmed},${row.faltante},\"${palletCode}\"\\n`;\n        });\n        filename = `faltantes_${selectedImportId}_${new Date().toISOString().split('T')[0]}.csv`;\n      } else {\n        csvContent = 'Import,Pallet,SKU,Cantidad Sobrante,Tiene Demanda\\n';\n        sobrantes.forEach((row) => {\n          // Ensure proper fallback string and escape quotes\n          const importName = (row.import_name || 'N/A').replace(/\"/g, '\"\"');\n          const palletCode = row.pallet_code.replace(/\"/g, '\"\"');\n\n          csvContent += `\"${importName}\",\"${palletCode}\",\"${row.sku}\",${row.qty_available},${row.tiene_demanda ? 'Sí' : 'No'}\\n`;\n        });\n        filename = `sobrantes_${selectedImportId}_${new Date().toISOString().split('T')[0]}.csv`;\n      }\n\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', filename);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      showToast('success', 'Exportado', `Archivo ${filename} descargado correctamente`);\n    } catch (error) {\n      console.error('Error exportando CSV:', error);\n      showToast('error', 'Error', 'No se pudo exportar el archivo');\n    }\n  };\n\n  const totalFaltantes = faltantes.reduce((sum, row) => sum + row.faltante, 0);\n  const totalSobrantes = sobrantes.reduce((sum, row) => sum + row.qty_available, 0);\n  const sobrantesSinDemanda = sobrantes.filter((s) => !s.tiene_demanda);\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <Link\n          to=\"/operacion\"\n          className=\"text-teal-600 hover:text-teal-700 text-sm font-medium mb-3 inline-flex items-center cursor-pointer\"\n        >\n          <i className=\"ri-arrow-left-line mr-1\"></i>\n          Volver a Operación\n        </Link>\n        <h2 className=\"text-2xl font-bold text-gray-900 mt-1\">Reportes de Distribución</h2>\n        <p className=\"text-sm text-gray-500 mt-1\">Análisis de faltantes y sobrantes por importación</p>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-100 p-5\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <label className=\"text-sm font-medium text-gray-700\">Filtrar por Importación:</label>\n          <select\n            value={selectedImportId}\n            onChange={(e) => setSelectedImportId(e.target.value)}\n            className=\"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm cursor-pointer min-w-[300px]\"\n          >\n            <option value=\"all\">Todas las importaciones</option>\n            {imports.map((imp) => (\n              <option key={imp.id} value={imp.id}>\n                {imp.file_name} - {new Date(imp.created_at).toLocaleDateString()}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-gradient-to-br from-red-50 to-rose-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-red-700\">Total Faltantes</p>\n                <p className=\"text-3xl font-bold text-red-600 mt-1\">{totalFaltantes}</p>\n                <p className=\"text-xs text-red-600 mt-1\">{faltantes.length} líneas</p>\n              </div>\n              <div className=\"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center\">\n                <i className=\"ri-error-warning-line text-2xl text-red-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-amber-700\">Total Sobrantes</p>\n                <p className=\"text-3xl font-bold text-amber-600 mt-1\">{totalSobrantes}</p>\n                <p className=\"text-xs text-amber-600 mt-1\">{sobrantes.length} líneas</p>\n              </div>\n              <div className=\"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center\">\n                <i className=\"ri-inbox-line text-2xl text-amber-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-700\">Sin Demanda</p>\n                <p className=\"text-3xl font-bold text-gray-600 mt-1\">{sobrantesSinDemanda.length}</p>\n                <p className=\"text-xs text-gray-600 mt-1\">SKUs sin pedido</p>\n              </div>\n              <div className=\"w-14 h-14 bg-gray-100 rounded-full flex items-center justify-center\">\n                <i className=\"ri-question-line text-2xl text-gray-600\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-100\">\n        <div className=\"border-b border-gray-200\">\n          <div className=\"flex\">\n            <button\n              onClick={() => setActiveTab('faltantes')}\n              className={`flex-1 px-6 py-4 text-sm font-medium transition-colors cursor-pointer ${\n                activeTab === 'faltantes'\n                  ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50/50'\n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              <i className=\"ri-error-warning-line mr-2\"></i>\n              Faltantes ({faltantes.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('sobrantes')}\n              className={`flex-1 px-6 py-4 text-sm font-medium transition-colors cursor-pointer ${\n                activeTab === 'sobrantes'\n                  ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50/50'\n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              <i className=\"ri-inbox-line mr-2\"></i>\n              Sobrantes ({sobrantes.length})\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-5\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-teal-500\"></div>\n            </div>\n          ) : (\n            <>\n              {activeTab === 'faltantes' ? (\n                <div>\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      Productos Faltantes\n                      <span className=\"text-sm font-normal text-gray-500 ml-2\">\n                        (Requerido &gt; Confirmado)\n                      </span>\n                    </h3>\n                    <button\n                      onClick={() => exportToCSV('faltantes')}\n                      disabled={faltantes.length === 0}\n                      className=\"px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n                    >\n                      <i className=\"ri-download-line mr-2\"></i>\n                      Exportar CSV\n                    </button>\n                  </div>\n\n                  {faltantes.length === 0 ? (\n                    <div className=\"text-center py-12\">\n                      <div className=\"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <i className=\"ri-checkbox-circle-line text-3xl text-emerald-600\"></i>\n                      </div>\n                      <p className=\"text-gray-600 font-medium\">No hay faltantes</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        Todas las líneas han sido completadas\n                      </p>\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"min-w-full divide-y divide-gray-200\">\n                        <thead className=\"bg-gray-50\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Import\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              SKU\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Descripción\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Tienda\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">\n                              Requerido\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">\n                              Confirmado\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">\n                              Faltante\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Pallet\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\n                          {faltantes.map((row, idx) => (\n                            <tr key={idx} className=\"hover:bg-gray-50\">\n                              <td className=\"px-4 py-3 text-sm text-gray-700\">{row.import_name}</td>\n                              <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">{row.sku}</td>\n                              <td className=\"px-4 py-3 text-sm text-gray-600\">{row.descripcion}</td>\n                              <td className=\"px-4 py-3 text-sm\">\n                                <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-sky-100 text-sky-700\">\n                                  {row.tienda}\n                                </span>\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-center text-gray-700\">\n                                {row.qty_to_send}\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-center text-teal-600 font-medium\">\n                                {row.qty_confirmed}\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-center\">\n                                <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700\">\n                                  {row.faltante}\n                                </span>\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-gray-700\">{row.pallet_code}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div>\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      Productos Sobrantes\n                      <span className=\"text-sm font-normal text-gray-500 ml-2\">\n                        (Inventario disponible &gt; 0)\n                      </span>\n                    </h3>\n                    <button\n                      onClick={() => exportToCSV('sobrantes')}\n                      disabled={sobrantes.length === 0}\n                      className=\"px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n                    >\n                      <i className=\"ri-download-line mr-2\"></i>\n                      Exportar CSV\n                    </button>\n                  </div>\n\n                  {sobrantes.length === 0 ? (\n                    <div className=\"text-center py-12\">\n                      <div className=\"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <i className=\"ri-checkbox-circle-line text-3xl text-emerald-600\"></i>\n                      </div>\n                      <p className=\"text-gray-600 font-medium\">No hay sobrantes</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        Todo el inventario ha sido distribuido\n                      </p>\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"min-w-full divide-y divide-gray-200\">\n                        <thead className=\"bg-gray-50\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Import\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              Pallet\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n                              SKU\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">\n                              Cantidad Sobrante\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">\n                              Estado\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\n                          {sobrantes.map((row, idx) => (\n                            <tr key={idx} className=\"hover:bg-gray-50\">\n                              <td className=\"px-4 py-3 text-sm text-gray-700\">\n                                {row.import_name || 'N/A'}\n                              </td>\n                              <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">\n                                {row.pallet_code}\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-gray-700\">{row.sku}</td>\n                              <td className=\"px-4 py-3 text-sm text-center\">\n                                <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700\">\n                                  {row.qty_available}\n                                </span>\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-center\">\n                                {row.tiene_demanda ? (\n                                  <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700\">\n                                    <i className=\"ri-shopping-cart-line mr-1\"></i>\n                                    Con demanda\n                                  </span>\n                                ) : (\n                                  <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700\">\n                                    <i className=\"ri-close-circle-line mr-1\"></i>\n                                    Sin demanda\n                                  </span>\n                                )}\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ReportesPage","showToast","useToast","imports","setImports","useState","selectedImportId","setSelectedImportId","faltantes","setFaltantes","sobrantes","setSobrantes","loading","setLoading","activeTab","setActiveTab","useEffect","loadImports","loadReportes","data","error","supabase","loadFaltantes","loadSobrantes","query","faltantesData","line","sobrantesData","inv","pallet","importId","tieneDemanda","demandaData","importInfo","exportToCSV","type","csvContent","filename","row","importName","descripcion","palletCode","blob","link","url","totalFaltantes","sum","totalSobrantes","sobrantesSinDemanda","s","jsxs","Link","jsx","e","imp","idx"],"mappings":"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"}