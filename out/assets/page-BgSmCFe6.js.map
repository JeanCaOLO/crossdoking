{"version":3,"file":"page-BgSmCFe6.js","sources":["../../src/pages/login/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { signIn, session, user, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  // Si ya hay sesi√≥n activa, redirigir al dashboard (solo cuando termine de cargar)\n  useEffect(() => {\n    if (authLoading) {\n      console.log('‚è≥ [LOGIN] AuthContext a√∫n cargando, esperando...');\n      return;\n    }\n\n    console.log('üîç [LOGIN] Verificando sesi√≥n existente:', {\n      hasSession: !!session,\n      hasUser: !!user,\n    });\n\n    if (session && user) {\n      console.log('‚úÖ [LOGIN] Sesi√≥n activa detectada, redirigiendo a /dashboard');\n      navigate('/dashboard', { replace: true });\n    } else {\n      console.log('‚ÑπÔ∏è [LOGIN] Sin sesi√≥n, mostrando formulario de login');\n    }\n  }, [session, user, authLoading, navigate]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    console.log('üîê [LOGIN] Intentando login con:', email);\n\n    try {\n      await signIn(email, password);\n      console.log('‚úÖ [LOGIN] Login exitoso, navegando a /dashboard');\n      navigate('/dashboard', { replace: true });\n    } catch (err: any) {\n      console.error('‚ùå [LOGIN] Error:', err);\n      setError(err.message || 'Error al iniciar sesi√≥n');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Mostrar loader mientras AuthContext verifica la sesi√≥n inicial\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line text-5xl text-teal-600 animate-spin\"></i>\n          <p className=\"mt-4 text-gray-600\">Verificando sesi√≥n...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-teal-600 rounded-2xl mb-4\">\n            <i className=\"ri-truck-line text-3xl text-white\"></i>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Crossdocking Almac√©n</h1>\n          <p className=\"text-gray-600\">Ingresa tus credenciales para continuar</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Correo electr√≥nico\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <i className=\"ri-mail-line text-gray-400\"></i>\n              </div>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                placeholder=\"tu@email.com\"\n                required\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Contrase√±a\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <i className=\"ri-lock-line text-gray-400\"></i>\n              </div>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                required\n              />\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3\">\n              <i className=\"ri-error-warning-line text-red-600 text-xl flex-shrink-0 mt-0.5\"></i>\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium text-red-800\">Error de autenticaci√≥n</p>\n                <p className=\"text-sm text-red-600 mt-1\">{error}</p>\n              </div>\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-teal-600 hover:bg-teal-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap\"\n          >\n            {loading ? (\n              <>\n                <i className=\"ri-loader-4-line animate-spin\"></i>\n                Iniciando sesi√≥n...\n              </>\n            ) : (\n              <>\n                <i className=\"ri-login-box-line\"></i>\n                Iniciar sesi√≥n\n              </>\n            )}\n          </button>\n        </form>\n\n        <div className=\"mt-6 text-center text-sm text-gray-600\">\n          <p>¬øProblemas para acceder?</p>\n          <p className=\"mt-1\">Contacta al administrador del sistema</p>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["LoginPage","email","setEmail","useState","password","setPassword","error","setError","loading","setLoading","signIn","session","user","authLoading","useAuth","navigate","useNavigate","useEffect","handleSubmit","e","err","jsxs","jsx","Fragment"],"mappings":"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"}