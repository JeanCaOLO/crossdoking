{"version":3,"file":"page-Ct6Nvsfj.js","sources":["../../src/pages/cargas/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase, Import } from '../../lib/supabase';\n\nexport default function CargasPage() {\n  const [imports, setImports] = useState<Import[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState<string>('all');\n\n  useEffect(() => {\n    loadImports();\n    const interval = setInterval(loadImports, 15000);\n    return () => clearInterval(interval);\n  }, [filter]);\n\n  const loadImports = async () => {\n    try {\n      let query = supabase.from('imports').select('*').order('created_at', { ascending: false });\n      if (filter !== 'all') {\n        query = query.eq('status', filter);\n      }\n      const { data, error } = await query;\n      if (error) throw error;\n      setImports(data || []);\n    } catch (error) {\n      console.error('Error cargando cargas:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    const badges = {\n      DRAFT: 'bg-gray-100 text-gray-700',\n      IN_PROGRESS: 'bg-blue-100 text-blue-700',\n      DONE: 'bg-green-100 text-green-700',\n    };\n    const labels = {\n      DRAFT: 'Borrador',\n      IN_PROGRESS: 'En Progreso',\n      DONE: 'Completado',\n    };\n    return (\n      <span className={`px-3 py-1 rounded-full text-xs font-medium ${badges[status as keyof typeof badges]}`}>\n        {labels[status as keyof typeof labels]}\n      </span>\n    );\n  };\n\n  const getProgress = (imp: Import) => {\n    if (imp.total_lines === 0) return 0;\n    return Math.round((imp.completed_lines / imp.total_lines) * 100);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-end\">\n        <Link\n          to=\"/cargas/nueva\"\n          className=\"px-5 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-lg text-sm font-medium hover:from-teal-600 hover:to-cyan-700 transition-all whitespace-nowrap cursor-pointer\"\n        >\n          <i className=\"ri-file-excel-2-line mr-2\"></i>\n          Importar Excel\n        </Link>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-100\">\n        <div className=\"p-4 border-b border-gray-100\">\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setFilter('all')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${\n                filter === 'all' ? 'bg-teal-50 text-teal-700' : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              Todas\n            </button>\n            <button\n              onClick={() => setFilter('DRAFT')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${\n                filter === 'DRAFT' ? 'bg-teal-50 text-teal-700' : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              Borrador\n            </button>\n            <button\n              onClick={() => setFilter('IN_PROGRESS')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${\n                filter === 'IN_PROGRESS' ? 'bg-teal-50 text-teal-700' : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              En Progreso\n            </button>\n            <button\n              onClick={() => setFilter('DONE')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${\n                filter === 'DONE' ? 'bg-teal-50 text-teal-700' : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              Completado\n            </button>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-16\">\n            <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-teal-500\"></div>\n          </div>\n        ) : imports.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n              <i className=\"ri-file-list-3-line text-3xl text-gray-300\"></i>\n            </div>\n            <p className=\"text-sm text-gray-500\">No hay cargas disponibles</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-100\">\n            {imports.map((imp) => (\n              <Link\n                key={imp.id}\n                to={`/cargas/${imp.id}`}\n                className=\"block p-5 hover:bg-gray-50/50 transition-colors cursor-pointer\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-11 h-11 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-file-list-3-line text-xl text-white\"></i>\n                    </div>\n                    <div>\n                      <h3 className=\"text-sm font-semibold text-gray-900\">{imp.file_name}</h3>\n                      <p className=\"text-xs text-gray-500 mt-0.5\">\n                        {new Date(imp.created_at).toLocaleDateString('es-ES', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit',\n                        })}\n                      </p>\n                    </div>\n                  </div>\n                  {getStatusBadge(imp.status)}\n                </div>\n\n                <div className=\"space-y-1.5\">\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className=\"text-gray-500\">Progreso</span>\n                    <span className=\"font-medium text-gray-700\">\n                      {imp.completed_lines} / {imp.total_lines} l√≠neas ({getProgress(imp)}%)\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-gray-100 rounded-full h-1.5\">\n                    <div\n                      className=\"bg-gradient-to-r from-teal-500 to-cyan-600 h-1.5 rounded-full transition-all\"\n                      style={{ width: `${getProgress(imp)}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["CargasPage","imports","setImports","useState","loading","setLoading","filter","setFilter","useEffect","loadImports","interval","query","supabase","data","error","getStatusBadge","status","badges","labels","jsx","getProgress","imp","jsxs","Link"],"mappings":"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"}